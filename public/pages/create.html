<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HEX Create Character</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h1>HEX Create Character</h1>
        <form id="characterForm">
            <label for="fullname">Full Name:</label>
            <input type="text" id="fullname" name="fullname" required>

            <label for="birthday">Birthday:</label>
            <input type="date" id="birthday" name="birthday" required>

            <label for="employment">Employment:</label>
            <input type="text" id="employment" name="employment" required>

            <label for="gender">Gender:</label>
            <input type="text" id="gender" name="gender" required>

            <label for="networth">Net Worth:</label>
            <input type="text" id="networth" name="networth" required>

            <label for="game">Game:</label>
            <select id="game" name="game">
                <option value="GTA">Grand Theft Auto V (Ps4)</option>
                <option value="GTA5P5">Grand Theft Auto V (Ps5)</option>
                <option value="GRB">Tom Clancy's Ghost Recon Breakpoint</option>
                <option value="ACU">Assassin's Creed Unity</option>
                <option value="RDR">Red Dead Redemption 2</option>
            </select>
            <input type="text" id="customGame" name="customGame" placeholder="Enter game name" style="display: none;">

            <label for="playedby">Played By:</label>
            <input type="text" id="playedby" name="playedby" required>

            <label for="weight">Weight:</label>
            <input type="number" id="weight" name="weight" required>

            <label for="height">Height:</label>
            <input type="text" id="height" name="height" required>

            <label for="eye">Eye Color:</label>
            <input type="text" id="eye" name="eye" required>

            <label for="hair">Hair Color:</label>
            <input type="text" id="hair" name="hair" required>

            <label for="dead">Dead:</label>
            <input type="checkbox" id="dead" name="dead">

            <label for="dateofdeath">Date of Death:</label>
            <input type="date" id="dateofdeath" name="dateofdeath">

            <label for="alias">Alias:</label>
            <input type="text" id="alias" name="alias">

            <button type="submit">Create Character</button>
            <a href="https://ccse.onrender.com/">Back</a>
        </form>

        <script>
            document.getElementById('game').addEventListener('change', function() {
                const customGameInput = document.getElementById('customGame');
                if (this.value === 'Other') {
                    customGameInput.style.display = 'block';
                    customGameInput.required = true;
                } else {
                    customGameInput.style.display = 'none';
                    customGameInput.required = false;
                }
            });

            document.getElementById('characterForm').addEventListener('submit', async function(e) {
                e.preventDefault();

                const gameValue = document.getElementById('game').value === 'Other'
                    ? document.getElementById('customGame').value
                    : document.getElementById('game').value;

                const characterData = {
                    fullname: document.getElementById('fullname').value,
                    birthday: document.getElementById('birthday').value,
                    employment: document.getElementById('employment').value,
                    gender: document.getElementById('gender').value,
                    networth: document.getElementById('networth').value,
                    game: gameValue,
                    playedby: document.getElementById('playedby').value,
                    weight: document.getElementById('weight').value,
                    height: document.getElementById('height').value,
                    eye: document.getElementById('eye').value,
                    hair: document.getElementById('hair').value,
                    dead: document.getElementById('dead').checked,
                    dateofdeath: document.getElementById('dateofdeath').value,
                    alias: document.getElementById('alias').value
                };

                try {
                    const response = await fetch('/save-character', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(characterData)
                    });

                    alert(response.ok ? 'Character created successfully!' : 'Failed to create character.');
                } catch (error) {
                    alert('Error: ' + error.message);
                }
            });
        </script>
    </body>
</html>